# 从Paxos到Zookeeper分布式一致性原理与实践

## 学习目标
1. 理解分布式一致性实现方案
2. 结果当前的现状理解系统中的问题及待优化点
3. 能否输出一种分布式一致性实现方案
4. 12月底完成本书的学习

分布式一致性本质是因为存在多个数据副本导致的，在更新一个副本的同时，需要确保其他副本的数据也能正确更新，不然会造成数据的不一致；

一致性分类：
强一致性：会带来性能问题，系统的稳定性会遇到很大的挑战；
弱一致性：
最终一致性：很多系统声称存在最终一致性，但是仔细探究一下，发现现在的最终一致性保证方案存在很多漏洞；

## 分布式架构

分布式系统的典型特征：
1. 分布性
2. 对等性
3. 并发性
4. 缺乏全局时钟
5. 故障总是在发生

分布式系统常见的问题：
1. 通信异常：各个节点之间需要进行通信，但是网络是不可靠的；
2. 网络分区：当网络存在情况时，会导致只有部分节点能够正常通信；
3. 三态：成功、失败或者超时，如果是单机不会存在超时情况，而超时又比较复杂，可能失败了超时，也可能成功了超时；
4. 节点故障


### 从ACID到CAP/BASE

###  chubby分布式锁实现
1、使用了类似于unix的文件系统结构
2、提供了事件通知机制，服务端数据发生了变化，主动将数据通知到客户端，减轻了客户端主动拉的压力；
3、客户端会进行数据缓存，如果服务端数据发生变化，服务端的修改首先会阻塞，先让客户端的缓存过期，然后再进行修改，提供了强一致的数据模型。

### hypertable
核心优势：
- 支持高并发访问
- 支持海量的数据
- 可以随意水平扩容
- 容错性极高

### Zookeeper底层的一致性实现
zk的设计目标：
- 简单的数据模型
- 可以构建集群
- 顺序访问
- 高性能



## 疑问
1. 数据库开启事务会进行表锁定吗？如果事务很慢影响是什么？
2. 2PC线程有哪些实现方案的开源框架？
3. 为什么在业务系统重，使用zk的场景不多？难道不需要进行分布式事务一致性保证吗？

## 备注
分布式一致性太难理解了，这个总结先不发出去了，后面输出具体实践文章吧