1. 什么是内存屏障？
正常情况下，当执行程序时，为了提升程序的执行速度，会对当前执行指令进行重排，但是在多处理器环境中，可能得到未预期的结果。为了防止指令重排，通过加一条特殊的指令（相当于一个内存屏障），可以保证屏障前的指令不会重排到屏障之后，屏障后的指令不会重排到指令之前；

2. linux内核提供的内存屏障指令
- rmb() : 读屏障
- wmb() : 写屏障
- mb() : 通用屏障
- barrier() : 编译器级别的防止重排序指令

3. volatile和synchronized中如何防止指令重排
通过内存屏障机制实现的

4. 对于编译器或者CPU，显示的依赖关系是可以识别的，但是隐式的依赖关系没法识别到，所以如果指令重排了，就可能破坏隐式的依赖关系，得到未预期的结果，如果通过内存屏障显示指出这种隐式依赖关系；

3. 参考文档
- https://www.kernel.org/doc/Documentation/memory-barriers.txt
