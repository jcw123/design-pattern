驱动处理函数提供的一组设备驱动函数给操作系统，一般包括：open、close、read、write、ioctl等；
这一组函数通过一个叫做file operations的结构体注册到linux内核中，通过这一组驱动函数就可以通过
内核控制设备；


硬件对于驱动来讲，可以抽象为一组寄存器和需要响应的中断源，驱动可以按照一定的原则写入和读取这些地址空间；
中断源是硬件产生的中断，中断由内核进行响应，在模块初始化时可以对这些中断注册中断处理函数；


参考文章：https://blog.csdn.net/Mr0cheng/article/details/83305356


系统调用耗时分析参考文章：https://zhuanlan.zhihu.com/p/80206565

DMA和通道的关系：https://www.zhihu.com/question/31274481/answer/179151672

四种io传输方式：
1. 循环IO测试（Programmed I/O）
需要cpu不停地检测输入、输出的循环检测中，消耗大量的cpu时间；
2. 程序中断IO（Interrupt-Driven I/O）
当设备缓存有数据来时，会发出一个中断，然后内核响应中断，cpu进行调度将数据加载到内存中；
3. DMA方式
当需要进行IO数据传输时，CPU将DMA进行初始化，DMA接管总线权限，将所需要的数据全部读取到内存后，IO设备的控制器开会发出中断，
这种只需要开始和结束需要CPU的参与，对CPU的占用极少；
4. 通道
可以执行优先指令的IO控制器，代替CPU管理外设；

DMA和通道的区别：
共同点：
都能实现IO设备和内存之间建立数据直传通路；
不同点：
DMA只能实现固定的数据传送控制，而通道有自己的指令和程序，具有更强的独立处理数据输入和输出的能力。
DMA只能控制一台或者少数几台同类设备，而一个通道可以控制多台同类或者不同的设备。
